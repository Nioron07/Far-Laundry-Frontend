import{p as z,b1 as _,aW as U,i as R,s as N,b2 as Y,W as c,aE as G,am as K,an as F,af as X,y as J,b3 as E,U as M,z as o,aB as Z,a$ as q,ap as Q,O as ee,G as T,X as ae,Y as A,I as y,J as W,M as I,K as d,b4 as L,Z as te,a9 as P,aC as H,b5 as oe,b6 as j,H as re,a0 as le}from"./index-BRVvPEgZ.js";import{_ as ne,a as V,e as B}from"./VCard-wjS7PVUj.js";const se=z({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,..._({origin:"center center",scrollStrategy:"block",transition:{component:U},zIndex:2400})},"VDialog"),ie=R()({name:"VDialog",props:se(),emits:{"update:modelValue":r=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(r,D){let{emit:l,slots:b}=D;const p=N(r,"modelValue"),{scopeId:k}=Y(),s=c();function S(u){var h,x;const i=u.relatedTarget,n=u.target;if(i!==n&&((h=s.value)!=null&&h.contentEl)&&((x=s.value)!=null&&x.globalTop)&&![document,s.value.contentEl].includes(n)&&!s.value.contentEl.contains(n)){const w=Q(s.value.contentEl);if(!w.length)return;const f=w[0],v=w[w.length-1];i===f?v.focus():f.focus()}}G(()=>{document.removeEventListener("focusin",S)}),K&&F(()=>p.value&&r.retainFocus,u=>{u?document.addEventListener("focusin",S):document.removeEventListener("focusin",S)},{immediate:!0});function C(){var u;l("afterEnter"),(u=s.value)!=null&&u.contentEl&&!s.value.contentEl.contains(document.activeElement)&&s.value.contentEl.focus({preventScroll:!0})}function g(){l("afterLeave")}return F(p,async u=>{var i;u||(await X(),(i=s.value.activatorEl)==null||i.focus({preventScroll:!0}))}),J(()=>{const u=E.filterProps(r),i=M({"aria-haspopup":"dialog"},r.activatorProps),n=M({tabindex:-1},r.contentProps);return o(E,M({ref:s,class:["v-dialog",{"v-dialog--fullscreen":r.fullscreen,"v-dialog--scrollable":r.scrollable},r.class],style:r.style},u,{modelValue:p.value,"onUpdate:modelValue":h=>p.value=h,"aria-modal":"true",activatorProps:i,contentProps:n,height:r.fullscreen?void 0:r.height,width:r.fullscreen?void 0:r.width,maxHeight:r.fullscreen?void 0:r.maxHeight,maxWidth:r.fullscreen?void 0:r.maxWidth,role:"dialog",onAfterEnter:C,onAfterLeave:g},k),{activator:b.activator,default:function(){for(var h=arguments.length,x=new Array(h),w=0;w<h;w++)x[w]=arguments[w];return o(Z,{root:"VDialog"},{default:()=>{var f;return[(f=b.default)==null?void 0:f.call(b,...x)]}})}})}),q({},s)}}),ce={class:"toggle-div"},ue={class:"d-flex justify-center ma-10"},de={class:"d-flex justify-center pa-8"},ge={class:"d-flex justify-center"},we={class:"d-flex justify-center"},he={__name:"forecast",setup(r){const D=c(!0),l=c(0),b=c([]),p=c([]),k=c(),s=c(0),S=c(!1),C=c([{name:"Washers",data:b},{name:"Dryers",data:p}]),g=c({noData:{text:"Retrieving Data...",offsetY:-40,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{toolbar:{show:!1},background:"transparent",zoom:{enabled:!1}},title:{text:"Full Day Forecast",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:["12:00AM","1:00AM","2:00AM","3:00AM","4:00AM","5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","10:00AM","11:00AM","12:00PM","1:00PM","2:00PM","3:00PM","4:00PM","5:00PM","6:00PM","7:00PM","8:00PM","9:00PM","10:00PM","11:00PM"],labels:{style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}},tooltip:{enabled:!1}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/:\d{2}/,":00").toUpperCase().replace(" ",""),strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});async function u(O){const a={"hall wash":l.value==0?"dayWasherDataOg":"dayWasherDataTr","hall dry":l.value==0?"dayDryerDataOg":"dayDryerDataTr",currentWash:null,currentDry:null};var m=new Date().getDate().toString();await(await fetch(`https://backend-1047148175119.us-central1.run.app/current/${l.value}`)).json().then(e=>{a.currentWash=e["Washing Machines"],a.currentDry=e.Dryers}),(m!=window.localStorage.getItem("currentDay")||a.currentWash!=window.localStorage.getItem(a["hall wash"]).split(",")[new Date().getHours()]||a.currentDry!=window.localStorage.getItem(a["hall dry"]).split(",")[new Date().getHours()])&&(p.value=[],b.value=[],await(await fetch("https://backend-1047148175119.us-central1.run.app/today/0")).json().then(e=>{window.localStorage.setItem("dayWasherDataOg",Object.values(e["Washing Machines"].Predictions).toString()),window.localStorage.setItem("dayDryerDataOg",Object.values(e.Dryers.Predictions).toString()),window.localStorage.setItem("dayWashHighOg",e["Washing Machines"].High),window.localStorage.setItem("dayWashLowOg",e["Washing Machines"].Low),window.localStorage.setItem("dayDryHighOg",e.Dryers.High),window.localStorage.setItem("dayDryLowOg",e.Dryers.Low)}),await(await fetch("https://backend-1047148175119.us-central1.run.app/today/1")).json().then(e=>{window.localStorage.setItem("dayWasherDataTr",Object.values(e["Washing Machines"].Predictions).toString()),window.localStorage.setItem("dayDryerDataTr",Object.values(e.Dryers.Predictions).toString()),window.localStorage.setItem("dayWashHighTr",e["Washing Machines"].High),window.localStorage.setItem("dayWashLowTr",e["Washing Machines"].Low),window.localStorage.setItem("dayDryHighTr",e.Dryers.High),window.localStorage.setItem("dayDryLowTr",e.Dryers.Low)}),await(await fetch("https://backend-1047148175119.us-central1.run.app/currentTime")).json().then(e=>{window.localStorage.setItem("currentTime",e.Time)}));var t=new Date().getHours().toString()%12;t==0&&(t=12),t!=window.localStorage.getItem("currentTime").split(" ")[1].split(":")[0]&&await(await fetch("https://backend-1047148175119.us-central1.run.app/currentTime")).json().then(e=>{window.localStorage.setItem("currentTime",e.Time)}),g.value.annotations.xaxis[0].x=window.localStorage.getItem("currentTime").split(" ")[1],O==0?(C.value[0].data=window.localStorage.getItem("dayWasherDataOg").split(","),C.value[1].data=window.localStorage.getItem("dayDryerDataOg").split(","),g.value.annotations.xaxis[1].x=window.localStorage.getItem("dayWashHighOg"),g.value.annotations.xaxis[2].x=window.localStorage.getItem("dayWashLowOg"),g.value.annotations.xaxis[3].x=window.localStorage.getItem("dayDryHighOg"),g.value.annotations.xaxis[4].x=window.localStorage.getItem("dayDryLowOg")):(C.value[0].data=window.localStorage.getItem("dayWasherDataTr").split(","),C.value[1].data=window.localStorage.getItem("dayDryerDataTr").split(","),g.value.annotations.xaxis[1].x=window.localStorage.getItem("dayWashHighTr"),g.value.annotations.xaxis[2].x=window.localStorage.getItem("dayWashLowTr"),g.value.annotations.xaxis[3].x=window.localStorage.getItem("dayDryHighTr"),g.value.annotations.xaxis[4].x=window.localStorage.getItem("dayDryLowTr"))}u(l.value);const i=c([{name:"Washers",data:[]},{name:"Dryers",data:[]}]),n=c({noData:{text:"Retrieving Data...",offsetY:-30,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{background:"transparent",toolbar:{offsetX:-30,tools:{pan:!1,download:!1}}},title:{text:"7-Day Forecast",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:[],labels:{show:!1},labels:{rotate:0,style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:"",strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});function h(){u(l.value),w(l.value)}const x=c("100%");async function w(O){const a={"hall wash":l.value==0?"dayWasherDataOg":"dayWasherDataTr","hall dry":l.value==0?"dayDryerDataOg":"dayDryerDataTr",currentWash:null,currentDry:null};var m=new Date().getDate().toString();await(await fetch(`https://backend-1047148175119.us-central1.run.app/current/${l.value}`)).json().then(e=>{a.currentWash=e["Washing Machines"],a.currentDry=e.Dryers});var m=new Date().getDate().toString();(m!=window.localStorage.getItem("currentDay")||a.currentWash!=window.localStorage.getItem(a["hall wash"]).split(",")[new Date().getHours()]||a.currentDry!=window.localStorage.getItem(a["hall dry"]).split(",")[new Date().getHours()])&&(i.value[0].data=[],i.value[1].data=[],await(await fetch("https://backend-1047148175119.us-central1.run.app/week/0")).json().then(e=>{window.localStorage.setItem("currentDay",new Date().getDate().toString()),window.localStorage.setItem("currentTime",e["Current Time"]),window.localStorage.setItem("weekWasherDataOg",Object.values(e["Washing Machines"]).slice(0,Object.values(e["Washing Machines"]).length-2).toString()),window.localStorage.setItem("weekDryerDataOg",Object.values(e.Dryers).slice(0,Object.values(e["Washing Machines"]).length-2).toString()),window.localStorage.setItem("weekChartLabels",Object.keys(e.Dryers).slice(0,Object.values(e["Washing Machines"]).length-2).toString()),window.localStorage.setItem("weekWashHighOg",e["Washing Machines"].High),window.localStorage.setItem("weekWashLowOg",e["Washing Machines"].Low),window.localStorage.setItem("weekDryHighOg",e.Dryers.High),window.localStorage.setItem("weekDryLowOg",e.Dryers.Low)}),await(await fetch("https://backend-1047148175119.us-central1.run.app/week/1")).json().then(e=>{window.localStorage.setItem("weekWasherDataTr",Object.values(e["Washing Machines"]).slice(0,Object.values(e["Washing Machines"]).length-2).toString()),window.localStorage.setItem("weekDryerDataTr",Object.values(e.Dryers).slice(0,Object.values(e["Washing Machines"]).length-2).toString()),window.localStorage.setItem("weekWashHighTr",e["Washing Machines"].High),window.localStorage.setItem("weekWashLowTr",e["Washing Machines"].Low),window.localStorage.setItem("weekDryHighTr",e.Dryers.High),window.localStorage.setItem("weekDryLowTr",e.Dryers.Low)}),await(await fetch("https://backend-1047148175119.us-central1.run.app/currentTime")).json().then(e=>{window.localStorage.setItem("currentTime",e.Time)}),x.value="101%");var t=new Date().getHours().toString()%12;t==0&&(t=12),t!=window.localStorage.getItem("currentTime").split(" ")[1].split(":")[0]&&await(await fetch("https://backend-1047148175119.us-central1.run.app/currentTime")).json().then(e=>{window.localStorage.setItem("currentTime",e.Time)}),n.value.annotations.xaxis[0].x=window.localStorage.getItem("currentTime"),n.value.xaxis.categories=window.localStorage.getItem("weekChartLabels").split(","),O==0?(i.value[0].data=window.localStorage.getItem("weekWasherDataOg").split(","),i.value[1].data=window.localStorage.getItem("weekDryerDataOg").split(","),n.value.annotations.xaxis[1].x=window.localStorage.getItem("weekWashHighOg"),n.value.annotations.xaxis[2].x=window.localStorage.getItem("weekWashLowOg"),n.value.annotations.xaxis[3].x=window.localStorage.getItem("weekDryHighOg"),n.value.annotations.xaxis[4].x=window.localStorage.getItem("weekDryLowOg")):(i.value[0].data=window.localStorage.getItem("weekWasherDataTr").split(","),i.value[1].data=window.localStorage.getItem("weekDryerDataTr").split(","),n.value.annotations.xaxis[1].x=window.localStorage.getItem("weekWashHighTr"),n.value.annotations.xaxis[2].x=window.localStorage.getItem("weekWashLowTr"),n.value.annotations.xaxis[3].x=window.localStorage.getItem("weekDryHighTr"),n.value.annotations.xaxis[4].x=window.localStorage.getItem("weekDryLowTr"))}w(l.value);const f=c([{name:"Washers",data:[]},{name:"Dryers",data:[]}]),v=c({noData:{text:"Retrieving Data...",offsetY:-40,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{toolbar:{show:!1},background:"transparent",zoom:{enabled:!1}},title:{text:"",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:["12:00AM","1:00AM","2:00AM","3:00AM","4:00AM","5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","10:00AM","11:00AM","12:00PM","1:00PM","2:00PM","3:00PM","4:00PM","5:00PM","6:00PM","7:00PM","8:00PM","9:00PM","10:00PM","11:00PM"],labels:{style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}},tooltip:{enabled:!1}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/:\d{2}/,":00").toUpperCase().replace(" ",""),strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});async function $(){S.value=!0;let O=k.value,a=O.getDate(),m=O.getMonth()+1;await(await fetch(`https://backend-1047148175119.us-central1.run.app/day/${l.value}/dayOfMonth/${a}/month/${m}`)).json().then(t=>{f.value[0].data=Object.values(t["Washing Machines"].Predictions),f.value[1].data=Object.values(t.Dryers.Predictions),v.value.annotations.xaxis[1].x=t["Washing Machines"].High,v.value.annotations.xaxis[2].x=t["Washing Machines"].Low,v.value.annotations.xaxis[3].x=t.Dryers.High,v.value.annotations.xaxis[4].x=t.Dryers.Low}),v.value.title.text=`Forecast for ${k.value.toString().slice(0,15)}`,s.value=s.value+1,S.value=!1,D.value=!1}return(O,a)=>{const m=ee("apexchart");return T(),ae(le,null,[A("div",ce,[o(te,{modelValue:d(l),"onUpdate:modelValue":a[2]||(a[2]=t=>L(l)?l.value=t:null),mandatory:"",shaped:"",color:"lime-darken-4"},{default:y(()=>[o(W,{onClick:a[0]||(a[0]=t=>h()),value:0},{default:y(()=>a[7]||(a[7]=[I(" Oglesby ")])),_:1}),o(W,{onClick:a[1]||(a[1]=t=>h()),value:1},{default:y(()=>a[8]||(a[8]=[I(" Trelease ")])),_:1})]),_:1},8,["modelValue"])]),o(m,{class:"day-chart",type:"area",series:d(C),options:d(g),width:"100%",height:"36%"},null,8,["series","options"]),o(m,{class:"week-chart",type:"area",series:d(i),options:d(n),width:d(x),height:"36%"},null,8,["series","options","width"]),A("div",ue,[o(ie,{"max-width":"1000",persistent:""},{activator:y(({props:t})=>[o(W,M({"prepend-icon":"mdi-chart-box-plus-outline",stacked:"",color:"lime-darken-4"},t,{onClick:a[3]||(a[3]=e=>D.value=!0)}),{default:y(()=>a[9]||(a[9]=[I(" Custom Chart ")])),_:2},1040)]),default:y(({isActive:t})=>[P(o(V,{class:"chartCard",rounded:"xl"},{default:y(()=>[A("div",null,[A("div",de,[o(oe,{modelValue:d(k),"onUpdate:modelValue":a[4]||(a[4]=e=>L(k)?k.value=e:null),color:"lime-darken-4",elevation:"15",rounded:"xl","show-adjacent-months":"",width:"1000"},null,8,["modelValue"])]),A("div",ge,[o(W,{color:"lime-darken-4",elevation:"15",rounded:"pill",text:"Get Forecast",class:"dateSelect",onClick:a[5]||(a[5]=e=>$()),loading:d(S)},null,8,["loading"])]),o(B,{class:"pa-3"},{default:y(()=>[o(j),o(W,{text:"Close",onClick:e=>t.value=!1},null,8,["onClick"])]),_:2},1024)])]),_:2},1536),[[H,d(D)]]),P(o(V,{class:"graphCard pa-1",rounded:"xl"},{default:y(()=>[(T(),re(m,{class:"custom-chart",type:"area",key:d(s),series:d(f),options:d(v),height:"513"},null,8,["series","options"])),A("div",we,[o(W,{color:"lime-darken-4",elevation:"15",rounded:"pill",text:"Pick another date",class:"dateSelect",onClick:a[6]||(a[6]=e=>D.value=!0)})]),o(B,{class:"pa-2"},{default:y(()=>[o(j),o(W,{text:"Close",onClick:e=>t.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1536),[[H,!d(D)]])]),_:1})])],64)}}},fe=ne(he,[["__scopeId","data-v-faae5fa2"]]);export{fe as default};
