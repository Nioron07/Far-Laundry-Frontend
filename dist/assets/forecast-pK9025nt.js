import{p as me,b2 as ye,aX as he,i as fe,s as xe,b3 as De,W as c,aF as ve,an as Se,ao as ae,ag as ke,y as be,b4 as oe,U as q,z as a,aC as Oe,b0 as pe,aq as Ce,_ as Ie,O as We,G as re,X as Ae,Y as j,I as h,J as M,M as te,K as g,b5 as se,Z as Te,aa as ne,aD as le,b6 as Me,b7 as ie,H as Fe,a1 as Ee}from"./index-i2zWduFA.js";import{b as ce,e as de}from"./VCard-7fLSCR4J.js";const He=me({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ye({origin:"center center",scrollStrategy:"block",transition:{component:he},zIndex:2400})},"VDialog"),Le=fe()({name:"VDialog",props:He(),emits:{"update:modelValue":o=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(o,O){let{emit:n,slots:p}=O;const C=xe(o,"modelValue"),{scopeId:I}=De(),l=c();function W(d){var m,D;const i=d.relatedTarget,s=d.target;if(i!==s&&((m=l.value)!=null&&m.contentEl)&&((D=l.value)!=null&&D.globalTop)&&![document,l.value.contentEl].includes(s)&&!l.value.contentEl.contains(s)){const y=Ce(l.value.contentEl);if(!y.length)return;const f=y[0],v=y[y.length-1];i===f?v.focus():f.focus()}}ve(()=>{document.removeEventListener("focusin",W)}),Se&&ae(()=>C.value&&o.retainFocus,d=>{d?document.addEventListener("focusin",W):document.removeEventListener("focusin",W)},{immediate:!0});function A(){var d;n("afterEnter"),(d=l.value)!=null&&d.contentEl&&!l.value.contentEl.contains(document.activeElement)&&l.value.contentEl.focus({preventScroll:!0})}function w(){n("afterLeave")}return ae(C,async d=>{var i;d||(await ke(),(i=l.value.activatorEl)==null||i.focus({preventScroll:!0}))}),be(()=>{const d=oe.filterProps(o),i=q({"aria-haspopup":"dialog"},o.activatorProps),s=q({tabindex:-1},o.contentProps);return a(oe,q({ref:l,class:["v-dialog",{"v-dialog--fullscreen":o.fullscreen,"v-dialog--scrollable":o.scrollable},o.class],style:o.style},d,{modelValue:C.value,"onUpdate:modelValue":m=>C.value=m,"aria-modal":"true",activatorProps:i,contentProps:s,height:o.fullscreen?void 0:o.height,width:o.fullscreen?void 0:o.width,maxHeight:o.fullscreen?void 0:o.maxHeight,maxWidth:o.fullscreen?void 0:o.maxWidth,role:"dialog",onAfterEnter:A,onAfterLeave:w},I),{activator:p.activator,default:function(){for(var m=arguments.length,D=new Array(m),y=0;y<m;y++)D[y]=arguments[y];return a(Oe,{root:"VDialog"},{default:()=>{var f;return[(f=p.default)==null?void 0:f.call(p,...D)]}})}})}),pe({},l)}}),Pe={class:"toggle-div"},Re={class:"d-flex justify-center ma-10"},Ve={class:"d-flex justify-center pa-8"},je={class:"d-flex justify-center"},Be={class:"d-flex justify-center"},$e={__name:"forecast",setup(o){localStorage.clear();const O=c(!0),n=c(0),p=c([]),C=c([]),I=c(new Date),l=c(0),W=c(!1),A=c([{name:"Washers",data:p},{name:"Dryers",data:C}]),w=c({noData:{text:"Retrieving Data...",offsetY:-40,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},forecastDataPoints:{count:23-new Date().getHours()},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{toolbar:{show:!1},background:"transparent",zoom:{enabled:!1}},title:{text:"Full Day Forecast",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:["12:00AM","1:00AM","2:00AM","3:00AM","4:00AM","5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","10:00AM","11:00AM","12:00PM","1:00PM","2:00PM","3:00PM","4:00PM","5:00PM","6:00PM","7:00PM","8:00PM","9:00PM","10:00PM","11:00PM"],labels:{style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}},tooltip:{enabled:!1}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/:\d{2}/,":00").toUpperCase().replace(" ",""),strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});async function d(T){var b,X;const e="https://backend-1047148175119.us-central1.run.app",x=n.value===0?"dayWasherDataOg":"dayWasherDataTr",r=n.value===0?"dayDryerDataOg":"dayDryerDataTr",B=await(await fetch(`${e}/current/${n.value}`)).json(),$=B["Washing Machines"],z=B.Dryers,_=new Date().getDate().toString(),K=window.localStorage.getItem("currentDay"),N=new Date().getHours(),Z=((b=window.localStorage.getItem(x))==null?void 0:b.split(","))||[],Y=((X=window.localStorage.getItem(r))==null?void 0:X.split(","))||[],F=_!==K,E=$!=null&&$!=Z[N],k=z!=null&&z!=Y[N],H=!window.localStorage.getItem("dayWasherDataOg"),J=!window.localStorage.getItem("dayDryerDataOg"),U=!window.localStorage.getItem("dayWasherDataTr"),Q=!window.localStorage.getItem("dayDryerDataTr"),G=H||J||U||Q;if(console.log(F+`
`+E+`
`+k+`
`+G),F||E||k||G){if(C.value=[],p.value=[],H||J||F||E||k){const u=await(await fetch(`${e}/today/0`)).json();window.localStorage.setItem("dayWasherDataOg",Object.values(u["Washing Machines"].Predictions).toString()),window.localStorage.setItem("dayDryerDataOg",Object.values(u.Dryers.Predictions).toString()),window.localStorage.setItem("dayWashHighOg",u["Washing Machines"].High),window.localStorage.setItem("dayWashLowOg",u["Washing Machines"].Low),window.localStorage.setItem("dayDryHighOg",u.Dryers.High),window.localStorage.setItem("dayDryLowOg",u.Dryers.Low)}if(U||Q||F||E||k){const u=await(await fetch(`${e}/today/1`)).json();window.localStorage.setItem("dayWasherDataTr",Object.values(u["Washing Machines"].Predictions).toString()),window.localStorage.setItem("dayDryerDataTr",Object.values(u.Dryers.Predictions).toString()),window.localStorage.setItem("dayWashHighTr",u["Washing Machines"].High),window.localStorage.setItem("dayWashLowTr",u["Washing Machines"].Low),window.localStorage.setItem("dayDryHighTr",u.Dryers.High),window.localStorage.setItem("dayDryLowTr",u.Dryers.Low)}window.localStorage.setItem("currentDay",_);const ee=await(await fetch(`${e}/currentTime`)).json();window.localStorage.setItem("currentTime",ee.Time)}let L=new Date().getHours()%12;L===0&&(L=12);const P=window.localStorage.getItem("currentTime")||"",[,R]=P.split(" ")||[],t=R?R.split(":")[0]:null;if(L.toString()!==t){const ee=await(await fetch(`${e}/currentTime`)).json();window.localStorage.setItem("currentTime",ee.Time)}const V=(window.localStorage.getItem("currentTime")||"").split(" ")[1]||"";w.value.annotations.xaxis[0].x=V,T===0?(A.value[0].data=(window.localStorage.getItem("dayWasherDataOg")||"").split(","),A.value[1].data=(window.localStorage.getItem("dayDryerDataOg")||"").split(","),w.value.annotations.xaxis[1].x=window.localStorage.getItem("dayWashHighOg")||"",w.value.annotations.xaxis[2].x=window.localStorage.getItem("dayWashLowOg")||"",w.value.annotations.xaxis[3].x=window.localStorage.getItem("dayDryHighOg")||"",w.value.annotations.xaxis[4].x=window.localStorage.getItem("dayDryLowOg")||""):(A.value[0].data=(window.localStorage.getItem("dayWasherDataTr")||"").split(","),A.value[1].data=(window.localStorage.getItem("dayDryerDataTr")||"").split(","),w.value.annotations.xaxis[1].x=window.localStorage.getItem("dayWashHighTr")||"",w.value.annotations.xaxis[2].x=window.localStorage.getItem("dayWashLowTr")||"",w.value.annotations.xaxis[3].x=window.localStorage.getItem("dayDryHighTr")||"",w.value.annotations.xaxis[4].x=window.localStorage.getItem("dayDryLowTr")||"")}const i=c([{name:"Washers",data:[]},{name:"Dryers",data:[]}]),s=c({noData:{text:"Retrieving Data...",offsetY:-30,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},forecastDataPoints:{count:167-new Date().getHours()},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{background:"transparent",toolbar:{offsetX:-30,tools:{pan:!1,download:!1}}},title:{text:"7-Day Forecast",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:[],labels:{show:!1},labels:{rotate:0,style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:"",strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});function m(){d(n.value),y(n.value)}const D=c("100%");async function y(T){const e="https://backend-1047148175119.us-central1.run.app",x=n.value===0?"dayWasherDataOg":"dayWasherDataTr",r=n.value===0?"dayDryerDataOg":"dayDryerDataTr",B=await(await fetch(`${e}/current/${n.value}`)).json(),$=B["Washing Machines"],z=B.Dryers,_=window.localStorage.getItem(x),K=window.localStorage.getItem(r),N=_?_.split(","):[],Z=K?K.split(","):[],Y=new Date().getHours(),F=N[Y],E=Z[Y],k=$==null||$!=F,H=z==null||z!=E,J=!window.localStorage.getItem("weekWasherDataOg")||!window.localStorage.getItem("weekDryerDataOg")||!window.localStorage.getItem("weekWashHighOg")||!window.localStorage.getItem("weekWashLowOg")||!window.localStorage.getItem("weekDryHighOg")||!window.localStorage.getItem("weekDryLowOg")||!window.localStorage.getItem("weekChartLabels"),U=!window.localStorage.getItem("weekWasherDataTr")||!window.localStorage.getItem("weekDryerDataTr")||!window.localStorage.getItem("weekWashHighTr")||!window.localStorage.getItem("weekWashLowTr")||!window.localStorage.getItem("weekDryHighTr")||!window.localStorage.getItem("weekDryLowTr");if(J||U||k||H){if(i.value[0].data=[],i.value[1].data=[],J||k||H){const t=await(await fetch(`${e}/week/0`)).json(),V=Object.values(t["Washing Machines"]).slice(0,-2),b=Object.values(t.Dryers).slice(0,-2),X=Object.keys(t.Dryers).slice(0,-2);window.localStorage.setItem("currentTime",t["Current Time"]),window.localStorage.setItem("weekWasherDataOg",V.toString()),window.localStorage.setItem("weekDryerDataOg",b.toString()),window.localStorage.setItem("weekChartLabels",X.toString()),window.localStorage.setItem("weekWashHighOg",t["Washing Machines"].High),window.localStorage.setItem("weekWashLowOg",t["Washing Machines"].Low),window.localStorage.setItem("weekDryHighOg",t.Dryers.High),window.localStorage.setItem("weekDryLowOg",t.Dryers.Low)}if(U||k||H){const t=await(await fetch(`${e}/week/1`)).json(),V=Object.values(t["Washing Machines"]).slice(0,-2),b=Object.values(t.Dryers).slice(0,-2);window.localStorage.setItem("weekWasherDataTr",V.toString()),window.localStorage.setItem("weekDryerDataTr",b.toString()),window.localStorage.setItem("weekWashHighTr",t["Washing Machines"].High),window.localStorage.setItem("weekWashLowTr",t["Washing Machines"].Low),window.localStorage.setItem("weekDryHighTr",t.Dryers.High),window.localStorage.setItem("weekDryLowTr",t.Dryers.Low)}const P=await(await fetch(`${e}/currentTime`)).json();window.localStorage.setItem("currentTime",P.Time),D.value="101%"}{const L=window.localStorage.getItem("currentTime")||"",[,P]=L.split(" "),R=P?P.split(":")[0]:"";let t=new Date().getHours()%12;if(t===0&&(t=12),t.toString()!==R){const b=await(await fetch(`${e}/currentTime`)).json();window.localStorage.setItem("currentTime",b.Time)}}s.value.annotations.xaxis[0].x=window.localStorage.getItem("currentTime")||"";const G=window.localStorage.getItem("weekChartLabels")||"";s.value.xaxis.categories=G.split(","),console.log(s.value.xaxis.categories),T===0?(i.value[0].data=(window.localStorage.getItem("weekWasherDataOg")||"").split(","),i.value[1].data=(window.localStorage.getItem("weekDryerDataOg")||"").split(","),s.value.annotations.xaxis[1].x=window.localStorage.getItem("weekWashHighOg")||"",s.value.annotations.xaxis[2].x=window.localStorage.getItem("weekWashLowOg")||"",s.value.annotations.xaxis[3].x=window.localStorage.getItem("weekDryHighOg")||"",s.value.annotations.xaxis[4].x=window.localStorage.getItem("weekDryLowOg")||""):(i.value[0].data=(window.localStorage.getItem("weekWasherDataTr")||"").split(","),i.value[1].data=(window.localStorage.getItem("weekDryerDataTr")||"").split(","),s.value.annotations.xaxis[1].x=window.localStorage.getItem("weekWashHighTr")||"",s.value.annotations.xaxis[2].x=window.localStorage.getItem("weekWashLowTr")||"",s.value.annotations.xaxis[3].x=window.localStorage.getItem("weekDryHighTr")||"",s.value.annotations.xaxis[4].x=window.localStorage.getItem("weekDryLowTr")||"")}m();const f=c([{name:"Washers",data:[]},{name:"Dryers",data:[]}]),v=c({noData:{text:"Retrieving Data...",offsetY:-40,style:{color:"#EEFF41",fontSize:"50px",fontFamily:"Oxanium"}},dataLabels:{enabled:!1},colors:["#EEFF41","#FFAB00"],stroke:{curve:"straight"},chart:{toolbar:{show:!1},background:"transparent",zoom:{enabled:!1}},title:{text:"",align:"left",style:{fontFamily:"Oxanium",color:"#827717"}},grid:{row:{colors:["#242424","transparent"],opacity:.5}},xaxis:{categories:["12:00AM","1:00AM","2:00AM","3:00AM","4:00AM","5:00AM","6:00AM","7:00AM","8:00AM","9:00AM","10:00AM","11:00AM","12:00PM","1:00PM","2:00PM","3:00PM","4:00PM","5:00PM","6:00PM","7:00PM","8:00PM","9:00PM","10:00PM","11:00PM"],labels:{style:{fontFamily:"Oxanium",fontSize:"8px",colors:"#827717"}},tooltip:{enabled:!1}},yaxis:{min:0,max:15,labels:{style:{fontFamily:"Oxanium",colors:"#827717"}}},legend:{fontFamily:"Oxanium",labels:{useSeriesColors:!0},markers:{strokeWidth:0,size:8}},tooltip:{followCursor:!0,theme:!0,style:{fontFamily:"Oxanium"}},theme:{mode:"dark"},annotations:{xaxis:[{x:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/:\d{2}/,":00").toUpperCase().replace(" ",""),strokeDashArray:7,borderColor:"#E65100",label:{borderColor:"#E65100",style:{color:"#fff",background:"#E65100",fontFamily:"Oxanium"},text:"Current Time"}},{x:"",strokeDashArray:7,borderColor:"#4A148C",label:{borderColor:"#4A148C",style:{color:"#fff",background:"#4A148C",fontFamily:"Oxanium"},text:"Washer High"}},{x:"",strokeDashArray:7,borderColor:"#EA80FC",label:{borderColor:"#EA80FC",style:{color:"#fff",background:"#EA80FC",fontFamily:"Oxanium"},text:"Washer Low"}},{x:"",strokeDashArray:7,borderColor:"#1B5E20",label:{borderColor:"#1B5E20",style:{color:"#fff",background:"#1B5E20",fontFamily:"Oxanium"},text:"Dryer High"}},{x:"",strokeDashArray:7,borderColor:"#43A047",label:{borderColor:"#43A047",style:{color:"#fff",background:"#43A047",fontFamily:"Oxanium"},text:"Dryer Low"}}]}});async function ue(){W.value=!0;let T=I.value,e=T.getDate(),x=T.getMonth()+1;await(await fetch(`https://backend-1047148175119.us-central1.run.app/day/${n.value}/dayOfMonth/${e}/month/${x}`)).json().then(r=>{f.value[0].data=Object.values(r["Washing Machines"].Predictions),f.value[1].data=Object.values(r.Dryers.Predictions),v.value.annotations.xaxis[1].x=r["Washing Machines"].High,v.value.annotations.xaxis[2].x=r["Washing Machines"].Low,v.value.annotations.xaxis[3].x=r.Dryers.High,v.value.annotations.xaxis[4].x=r.Dryers.Low}),v.value.title.text=`Forecast for ${I.value.toString().slice(0,15)}`,l.value=l.value+1,W.value=!1,O.value=!1}return(T,e)=>{const x=We("apexchart");return re(),Ae(Ee,null,[j("div",Pe,[a(Te,{modelValue:g(n),"onUpdate:modelValue":e[2]||(e[2]=r=>se(n)?n.value=r:null),mandatory:"",shaped:"",color:"lime-darken-4"},{default:h(()=>[a(M,{onClick:e[0]||(e[0]=r=>m()),value:0},{default:h(()=>e[7]||(e[7]=[te(" Oglesby ")])),_:1}),a(M,{onClick:e[1]||(e[1]=r=>m()),value:1},{default:h(()=>e[8]||(e[8]=[te(" Trelease ")])),_:1})]),_:1},8,["modelValue"])]),a(x,{class:"day-chart",type:"area",series:g(A),options:g(w),width:"100%",height:"235vh"},null,8,["series","options"]),a(x,{class:"week-chart",type:"area",series:g(i),options:g(s),width:g(D),height:"235vh"},null,8,["series","options","width"]),j("div",Re,[a(Le,{"max-width":"1000",persistent:""},{activator:h(({props:r})=>[a(M,q({"prepend-icon":"mdi-chart-box-plus-outline",stacked:"",color:"lime-darken-4"},r,{onClick:e[3]||(e[3]=S=>O.value=!0)}),{default:h(()=>e[9]||(e[9]=[te(" Custom Chart ")])),_:2},1040)]),default:h(({isActive:r})=>[ne(a(ce,{class:"chartCard",rounded:"xl"},{default:h(()=>[j("div",null,[j("div",Ve,[a(Me,{modelValue:g(I),"onUpdate:modelValue":e[4]||(e[4]=S=>se(I)?I.value=S:null),color:"lime-darken-4",elevation:"15",rounded:"xl","show-adjacent-months":"",width:"1000"},null,8,["modelValue"])]),j("div",je,[a(M,{color:"lime-darken-4",elevation:"15",rounded:"pill",text:"Get Forecast",class:"dateSelect",onClick:e[5]||(e[5]=S=>ue()),loading:g(W)},null,8,["loading"])]),a(de,{class:"pa-3"},{default:h(()=>[a(ie),a(M,{text:"Close",onClick:S=>r.value=!1},null,8,["onClick"])]),_:2},1024)])]),_:2},1536),[[le,g(O)]]),ne(a(ce,{class:"graphCard pa-1",rounded:"xl"},{default:h(()=>[(re(),Fe(x,{class:"custom-chart",type:"area",key:g(l),series:g(f),options:g(v),height:"513"},null,8,["series","options"])),j("div",Be,[a(M,{color:"lime-darken-4",elevation:"15",rounded:"pill",text:"Pick another date",class:"dateSelect",onClick:e[6]||(e[6]=S=>O.value=!0)})]),a(de,{class:"pa-2"},{default:h(()=>[a(ie),a(M,{text:"Close",onClick:S=>r.value=!1},null,8,["onClick"])]),_:2},1024)]),_:2},1536),[[le,!g(O)]])]),_:1})])],64)}}},Je=Ie($e,[["__scopeId","data-v-a60911d0"]]);export{Je as default};
